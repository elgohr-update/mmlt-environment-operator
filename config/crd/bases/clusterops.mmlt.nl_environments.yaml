
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.2.4
  creationTimestamp: null
  name: environments.clusterops.mmlt.nl
spec:
  additionalPrinterColumns:
  - JSONPath: .status.synced
    name: Synced
    type: string
  group: clusterops.mmlt.nl
  names:
    kind: Environment
    listKind: EnvironmentList
    plural: environments
    singular: environment
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: Environment is the Schema for the environments API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: EnvironmentSpec defines the desired state of an Environment.
          properties:
            clusters:
              description: Clusters are the ClusterSpec's for each cluster instance.
              items:
                properties:
                  addons:
                    properties:
                      jobs:
                        description: Jobs is an array of paths to job files in the
                          source tree.
                        items:
                          type: string
                        type: array
                      source:
                        description: Source is the repository that contains the k8s
                          addons resources.
                        properties:
                          ref:
                            description: Ref is the reference to the content to get.
                              For type=git it can be 'master', 'refs/heads/my-branch'
                              etc, see 'git reference' doc.
                            type: string
                          token:
                            description: Token is used to authenticate with the remote
                              server. For Type=git; - Token or ~/.ssh key should be
                              specified (azure devops requires the token to be prefixed
                              with 'x:')
                            type: string
                          type:
                            description: 'Type is the type of repository to use as
                              a source. Valid values are: - "git" (default): GIT repository.
                              - "local": local filesystem.'
                            enum:
                            - git
                            - local
                            type: string
                          url:
                            description: URL is the URL of the repo. When Token is
                              specified the URL is expected to start with 'https://'.
                            type: string
                        type: object
                      values:
                        additionalProperties:
                          type: string
                        description: Values are key-value pairs that are passed as
                          values to the job.
                        type: object
                    type: object
                  infrastructure:
                    properties:
                      aad:
                        description: Azure AD.
                        properties:
                          clientAppID:
                            type: string
                          serverAppID:
                            type: string
                          serverAppSecret:
                            type: string
                          tenantID:
                            type: string
                        type: object
                      aks:
                        description: AKS values.
                        properties:
                          envDomain:
                            type: string
                          pools:
                            additionalProperties:
                              properties:
                                subnetNewbits:
                                  description: Type of VM.
                                  type: string
                              type: object
                            description: Cluster worker pools. A 'default' pool is
                              required.
                            type: object
                          resourceGroup:
                            type: string
                          subnetNewbits:
                            description: Cluster ordinal number.
                            type: integer
                          subscription:
                            type: string
                          version:
                            description: Kubernetes version.
                            type: string
                          vnetCIDR:
                            type: string
                        type: object
                      main:
                        description: Main is the path in the source tree to main.tf.
                        type: string
                      source:
                        description: Source is the repository that contains Terraform
                          infrastructure code.
                        properties:
                          ref:
                            description: Ref is the reference to the content to get.
                              For type=git it can be 'master', 'refs/heads/my-branch'
                              etc, see 'git reference' doc.
                            type: string
                          token:
                            description: Token is used to authenticate with the remote
                              server. For Type=git; - Token or ~/.ssh key should be
                              specified (azure devops requires the token to be prefixed
                              with 'x:')
                            type: string
                          type:
                            description: 'Type is the type of repository to use as
                              a source. Valid values are: - "git" (default): GIT repository.
                              - "local": local filesystem.'
                            enum:
                            - git
                            - local
                            type: string
                          url:
                            description: URL is the URL of the repo. When Token is
                              specified the URL is expected to start with 'https://'.
                            type: string
                        type: object
                      x:
                        additionalProperties:
                          type: string
                        description: X are extension values (when regular values don't
                          fit the need)
                        type: object
                    type: object
                  name:
                    description: Name is the cluster name.
                    type: string
                  test:
                    type: object
                type: object
              type: array
            defaults:
              description: Defaults are the ClusterSpec's defaults.
              properties:
                addons:
                  properties:
                    jobs:
                      description: Jobs is an array of paths to job files in the source
                        tree.
                      items:
                        type: string
                      type: array
                    source:
                      description: Source is the repository that contains the k8s
                        addons resources.
                      properties:
                        ref:
                          description: Ref is the reference to the content to get.
                            For type=git it can be 'master', 'refs/heads/my-branch'
                            etc, see 'git reference' doc.
                          type: string
                        token:
                          description: Token is used to authenticate with the remote
                            server. For Type=git; - Token or ~/.ssh key should be
                            specified (azure devops requires the token to be prefixed
                            with 'x:')
                          type: string
                        type:
                          description: 'Type is the type of repository to use as a
                            source. Valid values are: - "git" (default): GIT repository.
                            - "local": local filesystem.'
                          enum:
                          - git
                          - local
                          type: string
                        url:
                          description: URL is the URL of the repo. When Token is specified
                            the URL is expected to start with 'https://'.
                          type: string
                      type: object
                    values:
                      additionalProperties:
                        type: string
                      description: Values are key-value pairs that are passed as values
                        to the job.
                      type: object
                  type: object
                infrastructure:
                  properties:
                    aad:
                      description: Azure AD.
                      properties:
                        clientAppID:
                          type: string
                        serverAppID:
                          type: string
                        serverAppSecret:
                          type: string
                        tenantID:
                          type: string
                      type: object
                    aks:
                      description: AKS values.
                      properties:
                        envDomain:
                          type: string
                        pools:
                          additionalProperties:
                            properties:
                              subnetNewbits:
                                description: Type of VM.
                                type: string
                            type: object
                          description: Cluster worker pools. A 'default' pool is required.
                          type: object
                        resourceGroup:
                          type: string
                        subnetNewbits:
                          description: Cluster ordinal number.
                          type: integer
                        subscription:
                          type: string
                        version:
                          description: Kubernetes version.
                          type: string
                        vnetCIDR:
                          type: string
                      type: object
                    main:
                      description: Main is the path in the source tree to main.tf.
                      type: string
                    source:
                      description: Source is the repository that contains Terraform
                        infrastructure code.
                      properties:
                        ref:
                          description: Ref is the reference to the content to get.
                            For type=git it can be 'master', 'refs/heads/my-branch'
                            etc, see 'git reference' doc.
                          type: string
                        token:
                          description: Token is used to authenticate with the remote
                            server. For Type=git; - Token or ~/.ssh key should be
                            specified (azure devops requires the token to be prefixed
                            with 'x:')
                          type: string
                        type:
                          description: 'Type is the type of repository to use as a
                            source. Valid values are: - "git" (default): GIT repository.
                            - "local": local filesystem.'
                          enum:
                          - git
                          - local
                          type: string
                        url:
                          description: URL is the URL of the repo. When Token is specified
                            the URL is expected to start with 'https://'.
                          type: string
                      type: object
                    x:
                      additionalProperties:
                        type: string
                      description: X are extension values (when regular values don't
                        fit the need)
                      type: object
                  type: object
                name:
                  description: Name is the cluster name.
                  type: string
                test:
                  type: object
              type: object
            policy:
              description: 'Policy specifies what operator behavior is allowed. Valid
                values are: - "AllowAll" (default): allows create, update and delete
                of environment and clusters; - "DenyDelete": forbids deletion of a
                cluster; - "DenyUpdate": forbids update/delete of a cluster.'
              enum:
              - AllowAll
              - DenyDelete
              - DenyUpdate
              type: string
          type: object
        status:
          description: EnvironmentStatus defines the observed state of an Environment.
          properties:
            clusters:
              additionalProperties:
                properties:
                  certificate-authority-data:
                    description: Result values provided to access a cluster.
                    type: string
                  hash:
                    description: Hash is an unique value for the (addons) source and
                      parameters being deployed. Hash includes infra.hash to express
                      the dependency of clusters on infra. (controller internal state,
                      do not use)
                    type: string
                  server:
                    type: string
                  user:
                    description: UserCredentials are the result values to authenticate
                      with a cluster.
                    properties:
                      client-key:
                        type: string
                      password:
                        type: string
                      string client-certificate:
                        type: string
                      username:
                        type: string
                    type: object
                type: object
              description: Clusters contains the deployment state of the clusters
                and optional result values.
              type: object
            conditions:
              description: Conditions are the latest available observations of the
                Environment's fitness.
              items:
                description: 'EnvironmentCondition shows what the operator is doing
                  or has done. Infra condition types: InfraTmplt, InfraInit, InfraPlan,
                  InfraApply Cluster condition types: ClusterAddon<ClusterName> ClusterTest<ClusterName>
                  See KEP sig-api-machinery/1623-standardize-conditions is going to
                  introduce it as k8s.io/apimachinery/pkg/apis/meta/v1'
                properties:
                  lastTransitionTime:
                    description: Last time the condition transitioned from one status
                      to another. This should be when the underlying condition changed.  If
                      that is not known, then using the time when the API field changed
                      is acceptable.
                    format: date-time
                    type: string
                  message:
                    description: A human readable message indicating details about
                      the transition.
                    type: string
                  reason:
                    description: The reason for the condition's last transition in
                      CamelCase.
                    type: string
                  status:
                    description: Status of the condition, one of True, False, Unknown.
                    type: string
                  type:
                    description: Type of condition in CamelCase.
                    type: string
                required:
                - lastTransitionTime
                - reason
                - status
                - type
                type: object
              type: array
            infra:
              description: 'Infra contains the deployment state of the infra and optional
                result values. Note: cluster specific result values are in Clusters.'
              properties:
                Hash:
                  description: Hash is an unique value for the (terraform) source
                    and parameters being deployed. (controller internal state, do
                    not use)
                  type: string
                added:
                  description: Added is the number of infrastructure objects added
                    on last apply.
                  type: integer
                changed:
                  description: Changed is the number of infrastructure objects changed
                    on last apply.
                  type: integer
                deleted:
                  description: Added is the number of infrastructure objects deleted
                    on last apply.
                  type: integer
                pAdded:
                  description: PAdded is the number of infrastructure objects planned
                    to being added on apply.
                  type: integer
                pChanged:
                  description: PChanged is the number of infrastructure objects planned
                    to being changed on apply.
                  type: integer
                pDeleted:
                  description: PAdded is the number of infrastructure objects planned
                    to being deleted on apply.
                  type: integer
                zTFState:
                  description: TFState is the Terraform state. (controller internal
                    state, do not use)
                  type: string
              type: object
            synced:
              description: Synced is a single word describing the Environment's fitness.
                Check conditions for more details. TODO consider renaming to summary
              type: string
          type: object
      type: object
  version: v1
  versions:
  - name: v1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
